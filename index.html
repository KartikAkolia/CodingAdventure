<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My LinkHub</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Header with Control Panel (Clock & BG Color Picker) -->
  <header id="control-panel" class="d-flex justify-content-end align-items-center py-2 pe-3">
    <span id="clock" class="text-muted me-3"></span>
    <label for="bgColorPicker" id="bgColorLabel" class="me-2">BG Color:</label>
    <input type="color" id="bgColorPicker" value="#faf3e0" />
  </header>
  
  <!-- Main Content -->
  <main class="container py-4">
    <h1 class="site-title text-center">LinkHub</h1>
    
    <!-- Buttons Section -->
    <section id="button-container" class="row g-3 justify-content-center">
      <!-- Buttons will be dynamically added via JavaScript -->
    </section>
  </main>

  <!-- Dynamic Images Wrapper -->
  <div id="image-wrapper"></div>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // -----------------------------
    // Clock Functionality
    // -----------------------------
    function updateClock() {
      const now = new Date();
      const options = {
        weekday: 'short', year: 'numeric', month: 'short', day: 'numeric',
        hour: '2-digit', minute: '2-digit', second: '2-digit'
      };
      document.getElementById('clock').innerText = now.toLocaleString('en-US', options);
    }
    setInterval(updateClock, 1000);
    updateClock();

    // -----------------------------
    // Background Color Persistence
    // -----------------------------
    // Check for a saved background color in localStorage and apply it
    const savedBgColor = localStorage.getItem('bgColor');
    if (savedBgColor) {
      document.documentElement.style.setProperty('--bg-color', savedBgColor);
      document.getElementById('bgColorPicker').value = savedBgColor;
    }
    
    // Listen for changes on the background color picker and update the CSS variable + localStorage
    document.getElementById('bgColorPicker').addEventListener('input', function(e) {
      const newColor = e.target.value;
      document.documentElement.style.setProperty('--bg-color', newColor);
      localStorage.setItem('bgColor', newColor);
    });
    
    // -----------------------------
    // Button Data Array & Creation
    // -----------------------------
    const buttons = [
      { name: 'Google', link: 'https://www.google.com/' },
      { name: 'Gmail', link: 'https://mail.google.com/' },
      { name: 'Outlook', link: 'https://www.microsoft.com/en-us/microsoft-365/outlook/' },
      { name: 'Teams', link: 'https://teams.microsoft.com/v2/' },
      { name: 'YouTube', link: 'https://www.youtube.com/' },
      { name: 'Knowled.gg', link: 'https://knowled.gg/enter/' }
    ];

    const buttonContainer = document.getElementById('button-container');
    buttons.forEach(btn => {
      const col = document.createElement('div');
      col.className = 'col-auto';

      const button = document.createElement('button');
      button.className = 'btn dynamic-color';
      button.addEventListener('click', () => window.open(btn.link, '_blank'));
      button.innerHTML = `<span class="button-text-border">${btn.name}</span>`;

      col.appendChild(button);
      buttonContainer.appendChild(col);
    });
    
    // -----------------------------
    // Image Data Array & Creation
    // -----------------------------
    const images = [
      {
        src: 'download.jpg',
        position: 'bottom-right',
        width: '400px',
        height: '400px',
        alt: 'Wallpaper'
      }
    ];

    const imageWrapper = document.getElementById('image-wrapper');
    images.forEach(image => {
      const container = document.createElement('div');
      const img = document.createElement('img');
      img.src = image.src;
      img.alt = image.alt || '';

      // Check if the image is marked as wallpaper (full screen)
      if (image.isWallpaper) {
        container.className = 'wallpaper';
      } else {
        container.style.position = 'absolute';
        
        // Handle image positioning
        if (image.position === 'center') {
          container.style.top = '50%';
          container.style.left = '50%';
          container.style.transform = 'translate(-50%, -50%)';
        } else {
          // Expecting format "vertical-horizontal" (e.g., "bottom-right")
          const [vertical, horizontal] = image.position.split('-');
          container.style[vertical] = '1rem';
          container.style[horizontal] = '1rem';
        }

        // Set dimensions if provided, or adjust based on image natural size after loading
        if (image.width && image.height) {
          container.style.width = image.width;
          container.style.height = image.height;
        } else {
          img.onload = () => {
            container.style.width = `${img.naturalWidth}px`;
            container.style.height = `${img.naturalHeight}px`;
          };
        }
      }
      
      container.appendChild(img);
      imageWrapper.appendChild(container);
    });
  </script>
</body>
</html>
